<!-- A diagram for the SLICEL is shown in;
    7 Series FPGAs CLB User Guide UG474 (v1.8) September 27, 2016
    Figure 2-4: Diagram of SLICEL
  -->
<pb_type name="SLICE_L" num_pb="1" xmlns:xi="http://www.w3.org/2001/XInclude">

  <input name="DX" num_pins="1" equivalent="false"/>
  <input name="D"  num_pins="6" equivalent="false"/>

  <input name="CX" num_pins="1" equivalent="false"/>
  <input name="C"  num_pins="6" equivalent="false"/>

  <input name="BX" num_pins="1" equivalent="false"/>
  <input name="B"  num_pins="6" equivalent="false"/>

  <input name="AX" num_pins="1" equivalent="false"/>
  <input name="A"  num_pins="6" equivalent="false"/>

  <input name="SR" num_pins="1" equivalent="false"/>
  <input name="CE" num_pins="1" equivalent="false"/>

  <clock name="CLK" num_pins="1" equivalent="false"/>

  <input  name="CARRY_IN"  num_pins="1" equivalent="false"/>
  <output name="CARRY_OUT" num_pins="1" equivalent="false"/>

  <output name="DMUX" num_pins="1" equivalent="false"/>
  <output name="Dout" num_pins="1" equivalent="false"/>
  <output name="DQ"   num_pins="1" equivalent="false"/>

  <output name="CMUX" num_pins="1" equivalent="false"/>
  <output name="Cout" num_pins="1" equivalent="false"/>
  <output name="CQ"   num_pins="1" equivalent="false"/>

  <output name="BMUX" num_pins="1" equivalent="false"/>
  <output name="Bout" num_pins="1" equivalent="false"/>
  <output name="BQ"   num_pins="1" equivalent="false"/>

  <output name="AMUX" num_pins="1" equivalent="false"/>
  <output name="Aout" num_pins="1" equivalent="false"/>
  <output name="AQ"   num_pins="1" equivalent="false"/>

  <!-- D6LUT, C6LUT, B6LUT, A6LUT == W6LUT
       A fracturable 6 input LUT. Can either be;
        - 2 * 5 input, 1 output LUT
        - 1 * 6 input, 1 output LUT
    -->
  <xi:include href="wlut/pb_type.ALUT.xml"/>
  <xi:include href="wlut/pb_type.BLUT.xml"/>
  <xi:include href="wlut/pb_type.CLUT.xml"/>
  <xi:include href="wlut/pb_type.DLUT.xml"/>

  <!-- D5FF, C5FF, B5FF, A5FF == W5FF -->
  <xi:include href="w5ff/pb_type.A5FF.xml"/>
  <xi:include href="w5ff/pb_type.B5FF.xml"/>
  <xi:include href="w5ff/pb_type.C5FF.xml"/>
  <xi:include href="w5ff/pb_type.D5FF.xml"/>

  <!-- DFF, CFF, BFF, AFF == WFF -->
  <xi:include href="wff/pb_type.AFF.xml"/>
  <xi:include href="wff/pb_type.BFF.xml"/>
  <xi:include href="wff/pb_type.CFF.xml"/>
  <xi:include href="wff/pb_type.DFF.xml"/>

  <xi:include href="muxes/f7amux/pb_type.xml"/>
  <xi:include href="muxes/f7bmux/pb_type.xml"/>
  <xi:include href="muxes/f8mux/pb_type.xml"/>

  <xi:include href="carry4/pb_type.xml"/>

  <!--
  <pb_type name="COUT_USED" num_pb="1" blif_model="">
    <input name="I0" num_pins="1"/>
    <input name="O0" num_pins="1"/>
  </pb_type>
  -->

  <!-- DUSED, CUSED, BUSED, AUSED
  <pb_type name="USED" num_pb="4" blif_model="">
    <input name="I0" num_pins="1"/>
    <input name="O0" num_pins="1"/>
  </pb_type>
  -->

  <interconnect>
    <!-- Repeat 4 times -->
    <direct name="D" input="SLICE_L.D" output="DLUT.A" />
    <direct name="C" input="SLICE_L.C" output="CLUT.A" />
    <direct name="B" input="SLICE_L.B" output="BLUT.A" />
    <direct name="A" input="SLICE_L.A" output="ALUT.A" />

    <!-- MUX for input to 5 flip-flop output. -->
    <mux
        name="D5FFMUX"
        input="
            SLICE_L.DX
            DLUT.O5
        "
        output="D5FF.D"
    />
    <mux
        name="C5FFMUX"
        input="
            SLICE_L.CX
            CLUT.O5
        "
        output="C5FF.D"
    />
    <mux
        name="B5FFMUX"
        input="
            SLICE_L.BX
            BLUT.O5
        "
        output="B5FF.D"
    />
    <mux
        name="A5FFMUX"
        input="
            SLICE_L.AX
            ALUT.O5
        "
        output="A5FF.D"
    />

    <!-- MUX for carry output. -->
    <mux
        name="DCYO"
        input="
            SLICE_L.DX
            DLUT.O5
        "
        output="CARRY.DI[3]"
    />
    <mux
        name="CCYO"
        input="
            SLICE_L.CX
            CLUT.O5
        "
        output="CARRY.DI[2]"
    />
    <mux
        name="BCYO"
        input="
            SLICE_L.BX
            BLUT.O5
        "
        output="CARRY.DI[1]"
    />
    <mux
        name="ACYO"
        input="
            SLICE_L.AX
            ALUT.O5
        "
        output="CARRY.DI[0]"
    />

    <!-- MUX for WMUX values. -->
    <mux
        name="DOUTMUX"
        input="
            D5FF.Q
            CARRY.O[3]
            DLUT.O6
            DLUT.O5
            CARRY.CO[3]
            "
        output="SLICE_L.DMUX"
    />
    <mux
        name="COUTMUX"
        input="
            C5FF.Q
            CARRY.O[2]
            CLUT.O6
            CLUT.O5
            F7BMUX.O
            CARRY.CO[2]
            "
        output="SLICE_L.CMUX"
    />
    <mux
        name="BOUTMUX"
        input="
            B5FF.Q
            CARRY.O[1]
            BLUT.O6
            BLUT.O5
            F8MUX.O
            CARRY.CO[1]
            "
        output="SLICE_L.BMUX"
    />
    <mux
        name="AOUTMUX"
        input="
            A5FF.Q
            CARRY.O[0]
            ALUT.O6
            ALUT.O5
            F7BMUX.O
            CARRY.CO[0]
            "
        output="SLICE_L.AMUX"
    />

    <!-- Muxes for WFF input -->
    <mux
        name="DFFMUX"
        input="
            CARRY.O[3]
            DLUT.O6
            DLUT.O5
            SLICE_L.DX
            CARRY.CO[3]
            "
        output="DFF.D"
    />
    <mux
        name="CFFMUX"
        input="
            CARRY.O[2]
            CLUT.O6
            CLUT.O5
            F7BMUX.O
            CARRY.CO[2]
            SLICE_L.CX
            "
        output="CFF.D"
    />
    <mux
        name="BFFMUX"
        input="
            CARRY.O[1]
            BLUT.O6
            BLUT.O5
            F8MUX.O
            CARRY.CO[1]
            SLICE_L.BX
            "
        output="BFF.D"
    />
    <mux
        name="AFFMUX"
        input="
            CARRY.O[0]
            DLUT.O6
            DLUT.O5
            F7AMUX.O
            CARRY.CO[0]
            SLICE_L.AX
            "
        output="AFF.D"
    />

    <direct name="DFF" input="DFF.Q" output="SLICE_L.AQ" />
    <direct name="CFF" input="CFF.Q" output="SLICE_L.BQ" />
    <direct name="BFF" input="BFF.Q" output="SLICE_L.CQ" />
    <direct name="AFF" input="AFF.Q" output="SLICE_L.DQ" />

    <!-- LUT O6 output -->
    <direct name="F7BMUX_I0" input="DLUT.O6" output="F7BMUX.I0" /><direct name="CARRY_S3" input="DLUT.O6" output="CARRY.S[3]" /><direct name="SLICE_L_Dout" input="DLUT.O6" output="SLICE_L.Dout" />
    <direct name="F7BMUX_I1" input="CLUT.O6" output="F7BMUX.I1" /><direct name="CARRY_S2" input="CLUT.O6" output="CARRY.S[2]" /><direct name="SLICE_L_Cout" input="CLUT.O6" output="SLICE_L.Cout" />
    <direct name="F7AMUX_I0" input="BLUT.O6" output="F7AMUX.I0" /><direct name="CARRY_S1" input="BLUT.O6" output="CARRY.S[1]" /><direct name="SLICE_L_Bout" input="BLUT.O6" output="SLICE_L.Bout" />
    <direct name="F7AMUX_I1" input="ALUT.O6" output="F7AMUX.I1" /><direct name="CARRY_S0" input="ALUT.O6" output="CARRY.S[0]" /><direct name="SLICE_L_Aout" input="ALUT.O6" output="SLICE_L.Aout" />

    <!-- Select lines for F7 MUXes -->
    <direct name="CX7S" input="SLICE_L.CX" output="F7BMUX.S" />
    <direct name="AX7S" input="SLICE_L.AX" output="F7AMUX.S" />

    <!-- F8MUX -->
    <direct name="F8MUX_IN0" input="F7BMUX.O" output="F8MUX.I0" />
    <direct name="F8MUX_IN1" input="F7AMUX.O" output="F8MUX.I1" />
    <direct name="F8MUX_S"   input="SLICE_L.BX" output="F8MUX.S" />
    <!-- <direct name="F8MUX_O"   input="F8MUX.O" output="" /> -->

    <!-- Carry -->
    <direct name="CYINIT"    input="SLICE_L.AX"  output="CARRY.CYINIT" />
    <direct name="CARRY_IN"  input="SLICE_L.CARRY_IN" output="CARRY.CIN" />
    <direct name="CARRY_OUT" input="CARRY.CO[3]" output="SLICE_L.CARRY_OUT" />

    <!-- Clock, Clock Enable and Reset -->
    <direct name="A5FF_CK" input="SLICE_L.CLK" output="A5FF.CK"/><direct name="AFF_CK" input="SLICE_L.CLK" output="AFF.CK"/>
    <direct name="B5FF_CK" input="SLICE_L.CLK" output="B5FF.CK"/><direct name="BFF_CK" input="SLICE_L.CLK" output="BFF.CK"/>
    <direct name="C5FF_CK" input="SLICE_L.CLK" output="C5FF.CK"/><direct name="CFF_CK" input="SLICE_L.CLK" output="CFF.CK"/>
    <direct name="D5FF_CK" input="SLICE_L.CLK" output="D5FF.CK"/><direct name="DFF_CK" input="SLICE_L.CLK" output="DFF.CK"/>

    <!-- <mux name="CEUSED" input="VCC SLICE_L.CE" output="{}"/> -->
    <direct name="A5FF_CE" input="SLICE_L.CE"  output="A5FF.CE"/><direct name="AFF_CE" input="SLICE_L.CE"  output="AFF.CE"/>
    <direct name="B5FF_CE" input="SLICE_L.CE"  output="B5FF.CE"/><direct name="BFF_CE" input="SLICE_L.CE"  output="BFF.CE"/>
    <direct name="C5FF_CE" input="SLICE_L.CE"  output="C5FF.CE"/><direct name="CFF_CE" input="SLICE_L.CE"  output="CFF.CE"/>
    <direct name="D5FF_CE" input="SLICE_L.CE"  output="D5FF.CE"/><direct name="DFF_CE" input="SLICE_L.CE"  output="DFF.CE"/>

    <!-- <mux name="SRUSED" input="GND SLICE_L.SR" output="{}"/> -->
    <direct name="A5FF_SR" input="SLICE_L.SR"  output="A5FF.SR"/><direct name="AFF_SR" input="SLICE_L.SR"  output="AFF.SR"/>
    <direct name="B5FF_SR" input="SLICE_L.SR"  output="B5FF.SR"/><direct name="BFF_SR" input="SLICE_L.SR"  output="BFF.SR"/>
    <direct name="C5FF_SR" input="SLICE_L.SR"  output="C5FF.SR"/><direct name="CFF_SR" input="SLICE_L.SR"  output="CFF.SR"/>
    <direct name="D5FF_SR" input="SLICE_L.SR"  output="D5FF.SR"/><direct name="DFF_SR" input="SLICE_L.SR"  output="DFF.SR"/>

  </interconnect>
</pb_type>
